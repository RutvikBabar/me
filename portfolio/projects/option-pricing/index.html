<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Options Pricing Model - Rutvik Babar</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="geometric-bg" id="geometricBg"></div>
    
    <div class="container">
        <nav class="project-nav">
            <a href="../../index.html" class="back-btn">← Back to Portfolio</a>
            <div class="project-title-nav">
                <h1>Black-Scholes Options Pricing</h1>
                <div class="devanagari-subtitle">विकल्प मूल्य निर्धारण</div>
            </div>
        </nav>

        <div class="main-content">
            <div class="input-section">
                <h2>Market Parameters</h2>
                <div class="input-grid">
                    <div class="input-group">
                        <label for="spotPrice">Spot Price (S)</label>
                        <input type="number" id="spotPrice" value="100" step="0.01" oninput="updateCalculations()">
                    </div>
                    <div class="input-group">
                        <label for="strikePrice">Strike Price (K)</label>
                        <input type="number" id="strikePrice" value="105" step="0.01" oninput="updateCalculations()">
                    </div>
                    <div class="input-group">
                        <label for="timeToExpiry">Time to Expiry (Years)</label>
                        <input type="number" id="timeToExpiry" value="0.25" step="0.01" oninput="updateCalculations()">
                    </div>
                    <div class="input-group">
                        <label for="riskFreeRate">Risk-Free Rate (%)</label>
                        <input type="number" id="riskFreeRate" value="5" step="0.01" oninput="updateCalculations()">
                    </div>
                    <div class="input-group">
                        <label for="volatility">Volatility (%)</label>
                        <input type="number" id="volatility" value="20" step="0.01" oninput="updateCalculations()">
                    </div>
                </div>
                
                <div class="python-info">
                    <h3>Python Implementation</h3>
                    <div class="tech-stack">
                        <span class="tech-tag">Python</span>
                        <span class="tech-tag">Black-Scholes</span>
                        <span class="tech-tag">Greeks</span>
                    </div>
                    <div class="implementation-note">
                        <p>Real-time calculations using Black-Scholes formula (no dividend yield):</p>
                        <div class="formula">
                            <strong>Call:</strong> C = S₀N(d₁) - Ke⁻ʳᵀN(d₂)
                        </div>
                        <div class="formula">
                            <strong>Put:</strong> P = Ke⁻ʳᵀN(-d₂) - S₀N(-d₁)
                        </div>
                    </div>
                </div>
            </div>

            <div class="results-section">
                <div class="pricing-results">
                    <h2>Option Prices</h2>
                    <div class="price-cards">
                        <div class="price-card call">
                            <h3>Call Option</h3>
                            <div class="price" id="callPrice">$2.4847</div>
                            <div class="intrinsic">Intrinsic: <span id="callIntrinsic">$0.0000</span></div>
                            <div class="time-value">Time Value: <span id="callTimeValue">$2.4847</span></div>
                        </div>
                        <div class="price-card put">
                            <h3>Put Option</h3>
                            <div class="price" id="putPrice">$6.1738</div>
                            <div class="intrinsic">Intrinsic: <span id="putIntrinsic">$5.0000</span></div>
                            <div class="time-value">Time Value: <span id="putTimeValue">$1.1738</span></div>
                        </div>
                    </div>
                </div>

                <div class="greeks-section">
                    <h2>Option Greeks</h2>
                    <div class="greeks-grid">
                        <div class="greek-card">
                            <h4>Delta (Δ)</h4>
                            <div class="greek-values">
                                <span>Call: <span id="callDelta">0.377</span></span>
                                <span>Put: <span id="putDelta">-0.623</span></span>
                            </div>
                            <div class="greek-desc">Price sensitivity to underlying</div>
                        </div>
                        <div class="greek-card">
                            <h4>Gamma (Γ)</h4>
                            <div class="greek-values">
                                <span>Both: <span id="gamma">0.038</span></span>
                            </div>
                            <div class="greek-desc">Delta sensitivity to underlying</div>
                        </div>
                        <div class="greek-card">
                            <h4>Theta (Θ)</h4>
                            <div class="greek-values">
                                <span>Call: <span id="callTheta">-0.026</span></span>
                                <span>Put: <span id="putTheta">-0.011</span></span>
                            </div>
                            <div class="greek-desc">Time decay per day</div>
                        </div>
                        <div class="greek-card">
                            <h4>Vega (ν)</h4>
                            <div class="greek-values">
                                <span>Both: <span id="vega">0.190</span></span>
                            </div>
                            <div class="greek-desc">Volatility sensitivity</div>
                        </div>
                        <div class="greek-card">
                            <h4>Rho (ρ)</h4>
                            <div class="greek-values">
                                <span>Call: <span id="callRho">0.088</span></span>
                                <span>Put: <span id="putRho">-0.171</span></span>
                            </div>
                            <div class="greek-desc">Interest rate sensitivity</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="charts-section">
            <div class="chart-container">
                <h3>Sensitivity Analysis</h3>
                <div class="sensitivity-display">
                    <div class="sensitivity-header">
                        <h4>Real-time Parameter Impact</h4>
                        <p id="currentParams">Current: S=$100, K=$105, T=0.25yr, r=5%, σ=20%</p>
                    </div>
                    
                    <div class="sensitivity-table">
                        <div class="table-header">
                            <span>Scenario</span>
                            <span>Call Price</span>
                            <span>Put Price</span>
                            <span>Call Delta</span>
                        </div>
                        <div class="table-row highlight" id="currentRow">
                            <span>Current</span>
                            <span id="currentCall">$2.48</span>
                            <span id="currentPut">$6.17</span>
                            <span id="currentDelta">0.377</span>
                        </div>
                        <div class="table-row" id="upRow">
                            <span>S +10%</span>
                            <span id="upCall">$7.35</span>
                            <span id="upPut">$1.04</span>
                            <span id="upDelta">0.741</span>
                        </div>
                        <div class="table-row" id="downRow">
                            <span>S -10%</span>
                            <span id="downCall">$0.47</span>
                            <span id="downPut">$15.11</span>
                            <span id="downDelta">0.096</span>
                        </div>
                        <div class="table-row" id="volUpRow">
                            <span>σ +5%</span>
                            <span id="volUpCall">$3.48</span>
                            <span id="volUpPut">$7.17</span>
                            <span id="volUpDelta">0.412</span>
                        </div>
                        <div class="table-row" id="volDownRow">
                            <span>σ -5%</span>
                            <span id="volDownCall">$1.68</span>
                            <span id="volDownPut">$5.37</span>
                            <span id="volDownDelta">0.337</span>
                        </div>
                    </div>
                    
                    <div class="sensitivity-summary">
                        <div class="summary-item">
                            <strong>Live Analysis:</strong>
                            <ul>
                                <li id="insight1">Higher spot price increases call value, decreases put value</li>
                                <li id="insight2">Higher volatility increases both call and put values</li>
                                <li id="insight3">Delta shows price sensitivity to underlying moves</li>
                                <li id="insight4">Time decay affects out-of-money options more</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Minimal JavaScript for real-time calculations
        function normalCDF(x) {
            return 0.5 * (1 + erf(x / Math.sqrt(2)));
        }

        function erf(x) {
            const a1 =  0.254829592;
            const a2 = -0.284496736;
            const a3 =  1.421413741;
            const a4 = -1.453152027;
            const a5 =  1.061405429;
            const p  =  0.3275911;

            const sign = x >= 0 ? 1 : -1;
            x = Math.abs(x);

            const t = 1.0 / (1.0 + p * x);
            const y = 1.0 - (((((a5 * t + a4) * t) + a3) * t + a2) * t + a1) * t * Math.exp(-x * x);

            return sign * y;
        }

        function blackScholes(S, K, T, r, sigma) {
            const d1 = (Math.log(S / K) + (r + 0.5 * sigma * sigma) * T) / (sigma * Math.sqrt(T));
            const d2 = d1 - sigma * Math.sqrt(T);

            const callPrice = S * normalCDF(d1) - K * Math.exp(-r * T) * normalCDF(d2);
            const putPrice = K * Math.exp(-r * T) * normalCDF(-d2) - S * normalCDF(-d1);
            const callDelta = normalCDF(d1);
            const putDelta = callDelta - 1;

            const pdf = Math.exp(-0.5 * d1 * d1) / Math.sqrt(2 * Math.PI);
            const gamma = pdf / (S * sigma * Math.sqrt(T));
            const vega = S * pdf * Math.sqrt(T) / 100;
            const callTheta = (-S * pdf * sigma / (2 * Math.sqrt(T)) - r * K * Math.exp(-r * T) * normalCDF(d2)) / 365;
            const putTheta = (-S * pdf * sigma / (2 * Math.sqrt(T)) + r * K * Math.exp(-r * T) * normalCDF(-d2)) / 365;
            const callRho = K * T * Math.exp(-r * T) * normalCDF(d2) / 100;
            const putRho = -K * T * Math.exp(-r * T) * normalCDF(-d2) / 100;

            return {
                callPrice, putPrice, callDelta, putDelta, gamma, vega, callTheta, putTheta, callRho, putRho
            };
        }

        function updateCalculations() {
            const S = parseFloat(document.getElementById('spotPrice').value);
            const K = parseFloat(document.getElementById('strikePrice').value);
            const T = parseFloat(document.getElementById('timeToExpiry').value);
            const r = parseFloat(document.getElementById('riskFreeRate').value) / 100;
            const sigma = parseFloat(document.getElementById('volatility').value) / 100;

            if (isNaN(S) || isNaN(K) || isNaN(T) || isNaN(r) || isNaN(sigma)) return;

            const results = blackScholes(S, K, T, r, sigma);

            // Update main prices
            document.getElementById('callPrice').textContent = `$${results.callPrice.toFixed(4)}`;
            document.getElementById('putPrice').textContent = `$${results.putPrice.toFixed(4)}`;
            
            // Update intrinsic values
            const callIntrinsic = Math.max(S - K, 0);
            const putIntrinsic = Math.max(K - S, 0);
            document.getElementById('callIntrinsic').textContent = `$${callIntrinsic.toFixed(4)}`;
            document.getElementById('putIntrinsic').textContent = `$${putIntrinsic.toFixed(4)}`;
            document.getElementById('callTimeValue').textContent = `$${(results.callPrice - callIntrinsic).toFixed(4)}`;
            document.getElementById('putTimeValue').textContent = `$${(results.putPrice - putIntrinsic).toFixed(4)}`;

            // Update Greeks
            document.getElementById('callDelta').textContent = results.callDelta.toFixed(3);
            document.getElementById('putDelta').textContent = results.putDelta.toFixed(3);
            document.getElementById('gamma').textContent = results.gamma.toFixed(3);
            document.getElementById('callTheta').textContent = results.callTheta.toFixed(3);
            document.getElementById('putTheta').textContent = results.putTheta.toFixed(3);
            document.getElementById('vega').textContent = results.vega.toFixed(3);
            document.getElementById('callRho').textContent = results.callRho.toFixed(3);
            document.getElementById('putRho').textContent = results.putRho.toFixed(3);

            // Update sensitivity analysis
            updateSensitivityAnalysis(S, K, T, r, sigma, results);
        }

        function updateSensitivityAnalysis(S, K, T, r, sigma, baseResults) {
            // Update current parameters display
            document.getElementById('currentParams').textContent = 
                `Current: S=$${S}, K=$${K}, T=${T}yr, r=${(r*100).toFixed(1)}%, σ=${(sigma*100).toFixed(1)}%`;

            // Current scenario
            document.getElementById('currentCall').textContent = `$${baseResults.callPrice.toFixed(2)}`;
            document.getElementById('currentPut').textContent = `$${baseResults.putPrice.toFixed(2)}`;
            document.getElementById('currentDelta').textContent = baseResults.callDelta.toFixed(3);

            // S +10% scenario
            const upResults = blackScholes(S * 1.1, K, T, r, sigma);
            document.getElementById('upCall').textContent = `$${upResults.callPrice.toFixed(2)}`;
            document.getElementById('upPut').textContent = `$${upResults.putPrice.toFixed(2)}`;
            document.getElementById('upDelta').textContent = upResults.callDelta.toFixed(3);

            // S -10% scenario
            const downResults = blackScholes(S * 0.9, K, T, r, sigma);
            document.getElementById('downCall').textContent = `$${downResults.callPrice.toFixed(2)}`;
            document.getElementById('downPut').textContent = `$${downResults.putPrice.toFixed(2)}`;
            document.getElementById('downDelta').textContent = downResults.callDelta.toFixed(3);

            // σ +5% scenario
            const volUpResults = blackScholes(S, K, T, r, sigma + 0.05);
            document.getElementById('volUpCall').textContent = `$${volUpResults.callPrice.toFixed(2)}`;
            document.getElementById('volUpPut').textContent = `$${volUpResults.putPrice.toFixed(2)}`;
            document.getElementById('volUpDelta').textContent = volUpResults.callDelta.toFixed(3);

            // σ -5% scenario
            const volDownResults = blackScholes(S, K, T, r, Math.max(0.01, sigma - 0.05));
            document.getElementById('volDownCall').textContent = `$${volDownResults.callPrice.toFixed(2)}`;
            document.getElementById('volDownPut').textContent = `$${volDownResults.putPrice.toFixed(2)}`;
            document.getElementById('volDownDelta').textContent = volDownResults.callDelta.toFixed(3);
        }

        // Create geometric background
        function createGeometricBackground() {
            const geometricBg = document.getElementById('geometricBg');
            const elementCount = 30;
            
            for (let i = 0; i < elementCount; i++) {
                const element = document.createElement('div');
                element.style.position = 'absolute';
                element.style.opacity = '0.1';
                
                const elementType = Math.random();
                
                if (elementType < 0.6) {
                    element.style.width = '8px';
                    element.style.height = '8px';
                    element.style.background = '#DAD8CA';
                    element.style.transform = 'rotate(45deg)';
                } else {
                    element.style.width = '40px';
                    element.style.height = '1px';
                    element.style.background = '#DAD8CA';
                    element.style.transform = `rotate(${Math.random() * 360}deg)`;
                }
                
                element.style.left = Math.random() * 100 + '%';
                element.style.top = Math.random() * 100 + '%';
                element.style.animation = `float ${8 + Math.random() * 4}s ease-in-out infinite`;
                element.style.animationDelay = Math.random() * 10 + 's';
                
                geometricBg.appendChild(element);
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            createGeometricBackground();
            updateCalculations();
        });
    </script>
</body>
</html>
